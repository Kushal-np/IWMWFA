<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WasteCare Pickup Requests</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        body {
            background: linear-gradient(135deg, #e8ffe3 0%, #d0f5d0 100%);
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 250px;
            background: linear-gradient(180deg, #2f6b2f 0%, #25592b 100%);
            color: white;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .menu {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .menu a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 1.1rem;
            opacity: 0.85;
            transition: all 0.3s ease;
        }

        .menu a:hover,
        .menu a.active {
            opacity: 1;
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.1);
        }

        .logout {
            margin-top: auto;
            color: #ffdddd;
        }

        .main {
            flex: 1;
            padding: 40px 50px;
            overflow-y: auto;
        }

        .main h1 {
            font-size: 2rem;
            margin-bottom: 6px;
            color: #1f5520;
        }

        .subtitle {
            opacity: 0.6;
            margin-bottom: 25px;
            color: #2f6b2f;
            font-size: 1rem;
        }

        .section h2 {
            margin-bottom: 15px;
            color: #1f5520;
            font-size: 1.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
            font-size: 1rem;
            margin-top: 20px;
        }

        table th,
        table td {
            padding: 16px;
            border-bottom: 1px solid #e0e0e0;
            text-align: left;
        }

        table th {
            background: linear-gradient(135deg, #d7ffd2, #c5f5c0);
            font-weight: 600;
            color: #2f6b2f;
        }

        table tr:hover {
            background: #f9fff8;
        }

        .status-btn,
        .request-btn {
            padding: 8px 14px;
            background: linear-gradient(135deg, #2f6b2f, #3a7d3a);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .status-btn:hover,
        .request-btn:hover {
            background: linear-gradient(135deg, #3a7d3a, #2f6b2f);
            transform: translateY(-2px);
        }

        .form-group {
            margin-bottom: 12px;
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 4px;
            font-weight: 500;
            color: #1f5520;
        }

        input,
        select {
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 1rem;
        }

        @media (max-width: 780px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
                height: fit-content;
                padding: 20px;
            }

            .menu {
                flex-direction: row;
            }

            .menu a {
                white-space: nowrap;
            }

            .main {
                padding: 20px;
            }

            table th,
            table td {
                padding: 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>

    <aside class="sidebar">
        <h2 class="logo">WasteCare</h2>
        <ul class="menu">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="pickup.html" class="active">Pickup Requests</a></li>
            <li><a href="payment.html">Payment</a></li>
            <li><a href="complaints.html">Complaints</a></li>
            <li><a href="schedule.html">Schedule</a></li>
            <li><a href="profile.html">Profile</a></li>
            <li><a href="logout.html" class="logout">Logout</a></li>
        </ul>
    </aside>

    <main class="main">
        <h1>Pickup Requests</h1>
        <p class="subtitle">Request pickups and confirm completion (double-check before marking done).</p>

        <div class="section">
            <h2>Request a Pickup</h2>
            <form id="pickupForm">
                <div class="form-group">
                    <label for="pickupDate">Date</label>
                    <input type="date" id="pickupDate" required>
                </div>
                <div class="form-group">
                    <label for="wasteType">Waste Type</label>
                    <select id="wasteType" required>
                        <option value="">Select</option>
                        <option value="Organic">Organic</option>
                        <option value="Plastic & Recyclables">Plastic & Recyclables</option>
                        <option value="General Waste">General Waste</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="pickupAmount">Pickup Amount (kg) (estimated)</label>
                    <input type="number" id="pickupAmount" placeholder="Enter amount in kg" required>
                </div>
                <div class="form-group">
                    <label for="pickupNote">Note (optional)</label>
                    <input type="text" id="pickupNote" placeholder="Add a note (e.g., special instructions)">
                </div>
                <button type="submit" class="request-btn">Request Pickup</button>
            </form>
        </div>

        <div class="section">
            <h2>Your Pickup Requests</h2>
            <table id="pickupTable">
                <thead>
                    <tr>
                        <th>SN</th>
                        <th>Date</th>
                        <th>Waste Type</th>
                        <th>Amount (kg)</th>
                        <th>Note</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </main>

    <script>
        let pickups = [
            { date: '2025-11-01', type: 'Organic', amount: 250, note: 'Near gate', status: 'Pending', clicks: 0 },
            { date: '2025-11-03', type: 'Plastic & Recyclables', amount: 300, note: 'Separate bag', status: 'Pending', clicks: 0 }
        ];

        const tbody = document.querySelector('#pickupTable tbody');

        function renderTable() {
            tbody.innerHTML = '';
            pickups.slice().reverse().forEach((pickup, index) => {
                const tr = document.createElement('tr');

                const tdSN = document.createElement('td');
                tdSN.textContent = index + 1;
                tr.appendChild(tdSN);

                const tdDate = document.createElement('td');
                tdDate.textContent = pickup.date;
                tr.appendChild(tdDate);

                const tdType = document.createElement('td');
                tdType.textContent = pickup.type;
                tr.appendChild(tdType);

                const tdAmount = document.createElement('td');
                tdAmount.textContent = pickup.amount;
                tr.appendChild(tdAmount);

                const tdNote = document.createElement('td');
                tdNote.textContent = pickup.note || '-';
                tr.appendChild(tdNote);

                const tdStatus = document.createElement('td');
                tdStatus.textContent = pickup.status;
                tr.appendChild(tdStatus);

                const tdAction = document.createElement('td');
                if (pickup.status === 'Pending') {
                    const btn = document.createElement('button');
                    btn.textContent = 'Mark Done';
                    btn.className = 'status-btn';
                    btn.onclick = () => {
                        if (confirm("Click OK to confirm marking as done or Cancel to abort.")) {
                            pickup.clicks++;
                            if (pickup.clicks >= 2) {
                                pickup.status = 'Completed';
                            } else {
                                alert('Please confirm again before marking as done.');
                            }
                            renderTable();
                        }
                    };
                    tdAction.appendChild(btn);
                }
                tr.appendChild(tdAction);

                tbody.appendChild(tr);
            });
        }

        renderTable();

        document.getElementById('pickupForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const date = document.getElementById('pickupDate').value;
            const type = document.getElementById('wasteType').value;
            const amount = parseInt(document.getElementById('pickupAmount').value, 10);
            const note = document.getElementById('pickupNote').value;

            if (amount <= 200) {
                alert('Pickup amount must be greater than 200 kg.');
                return;
            }

            pickups.push({ date, type, amount, note, status: 'Pending', clicks: 0 });
            renderTable();
            this.reset();
        });
    </script>

</body>

</html>